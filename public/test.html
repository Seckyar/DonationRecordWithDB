<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Donor Test UI</title>
</head>
<body>
<h1>Donor Donation Test</h1>

<!-- Add Donation -->
<h2>Add Donation</h2>
<form id="addDonationForm">
    Donor ID: <input type="text" id="donorIdAdd" required><br>
    Amount: <input type="number" id="amountAdd" required><br>
    Date: <input type="date" id="dateAdd" required><br>
    <button type="submit">Add Donation</button>
</form>

<!-- Edit Donation -->
<h2>Edit Donation</h2>
<form id="editDonationForm">
    Donor ID: <input type="text" id="donorIdEdit" required><br>
    Donation ID: <input type="text" id="donationIdEdit" required><br>
    Amount: <input type="number" id="amountEdit"><br>
    Date: <input type="date" id="dateEdit"><br>
    <button type="submit">Edit Donation</button>
</form>

<!-- Remove Donation -->
<h2>Remove Donation</h2>
<form id="removeDonationForm">
    Donor ID: <input type="text" id="donorIdRemove" required><br>
    Donation ID: <input type="text" id="donationIdRemove" required><br>
    <button type="submit">Remove Donation</button>
</form>

<!-- Response -->
<h2>Response</h2>
<pre id="response"></pre>

<script>
const responseEl = document.getElementById('response');

// Add Donation
document.getElementById('addDonationForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const donorId = document.getElementById('donorIdAdd').value;
    const amount = document.getElementById('amountAdd').value;
    const date = document.getElementById('dateAdd').value;

    const res = await fetch(`/api/donors/${donorId}/donations`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ amount, date })
    });
    const data = await res.json();
    responseEl.textContent = JSON.stringify(data, null, 2);
});

// Edit Donation
document.getElementById('editDonationForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const donorId = document.getElementById('donorIdEdit').value;
    const donationId = document.getElementById('donationIdEdit').value;
    const amount = document.getElementById('amountEdit').value;
    const date = document.getElementById('dateEdit').value;

    const body = {};
    if (amount) body.amount = amount;
    if (date) body.date = date;

    const res = await fetch(`/api/donors/${donorId}/donations/${donationId}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(body)
    });
    const data = await res.json();
    responseEl.textContent = JSON.stringify(data, null, 2);
});

// Remove Donation
document.getElementById('removeDonationForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const donorId = document.getElementById('donorIdRemove').value;
    const donationId = document.getElementById('donationIdRemove').value;

    const res = await fetch(`/api/donors/${donorId}/donations/${donationId}`, {
        method: 'DELETE'
    });
    const data = await res.json();
    responseEl.textContent = JSON.stringify(data, null, 2);
});
</script>
</body>
</html>
